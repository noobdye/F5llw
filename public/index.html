<!DOCTYPE html>
<html lang="pt-BR" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CordFleet üöÄ | Hospedagem de Bots</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0; padding: 0;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #e0f7e3;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      user-select: none;
      text-align: center;
    }
    h1 {
      font-size: 3.5rem;
      color: #00ffae;
      text-shadow: 0 0 8px #00ffae;
      margin-bottom: 0.3em;
      font-weight: 900;
    }
    p {
      font-size: 1.2rem;
      max-width: 480px;
      margin-bottom: 2rem;
      line-height: 1.5;
      color: #a8f9c9cc;
    }
    .file-upload {
      position: relative;
      display: inline-block;
      width: 320px;
      max-width: 90vw;
      cursor: pointer;
      border: 2px dashed #00ffae88;
      padding: 1.5rem 1rem;
      border-radius: 12px;
      transition: background-color 0.3s ease, border-color 0.3s ease;
      color: #00ffaecc;
      font-weight: 600;
      user-select: none;
      box-shadow: inset 0 0 12px #00ffae33;
      overflow: hidden;
    }
    .file-upload:hover {
      background-color: #00ffae11;
      border-color: #00ffaeee;
      box-shadow: inset 0 0 20px #00ffae66;
    }
    .file-upload input[type="file"] {
      position: absolute;
      left: 0; top: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      cursor: pointer;
    }
    button {
      margin-top: 1.5rem;
      background: linear-gradient(45deg, #00ffae, #00d995);
      border: none;
      padding: 14px 38px;
      border-radius: 30px;
      font-size: 1.15rem;
      font-weight: 700;
      color: #000;
      cursor: pointer;
      box-shadow: 0 0 10px #00ffae99;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      user-select: none;
    }
    button::before {
      content: "";
      position: absolute;
      width: 120%;
      height: 120%;
      background: linear-gradient(270deg, #00d995, #00ffae);
      top: -100%;
      left: -10%;
      transform: rotate(45deg);
      transition: all 0.5s ease;
      filter: blur(15px);
      opacity: 0.7;
      z-index: -1;
    }
    button:hover::before {
      top: 0;
      left: 0;
      opacity: 1;
      filter: blur(25px);
    }
    button:hover {
      color: #fff;
      box-shadow: 0 0 25px #00ffaebb;
      transform: scale(1.05);
    }
    #status {
      margin-top: 1.8rem;
      font-size: 1.1rem;
      font-weight: 700;
      min-height: 1.5em;
      color: #00ffae;
      text-shadow: 0 0 8px #00ffaeaa;
      transition: color 0.3s ease;
      user-select: text;
      white-space: pre-wrap;
      max-width: 90vw;
    }
    #status.error {
      color: #ff4c4c;
      text-shadow: 0 0 8px #ff4c4cbb;
    }
    footer {
      margin-top: 4rem;
      font-size: 0.9rem;
      color: #555;
      user-select: text;
    }
  </style>
</head>
<body>
  <h1>CordFleet üöÄ</h1>
  <p>
    Hospede seu bot Python direto na CordFleet com seguran√ßa e facilidade!<br />
    Envie um arquivo <b>.zip</b> contendo <b>main.py</b> e <b>requirements.txt</b>.<br />
    RAM fixa: <b>150MB</b>.
  </p>

  <label class="file-upload" for="fileInput">
    Selecione seu arquivo ZIP
    <input type="file" id="fileInput" accept=".zip" />
  </label>
  
  <button id="sendBtn" onclick="enviar()" disabled>üì§ Enviar Bot ZIP</button>

  <div id="status"></div>

  <footer>Feito com üíô por CordFleet üöÄ</footer>

  <script>
    const fileInput = document.getElementById("fileInput");
    const sendBtn = document.getElementById("sendBtn");
    const status = document.getElementById("status");

    fileInput.addEventListener("change", () => {
      status.textContent = "";
      status.classList.remove("error");
      if (fileInput.files.length === 0) {
        sendBtn.disabled = true;
      } else {
        const file = fileInput.files[0];
        if (file.name.toLowerCase().endsWith(".zip")) {
          sendBtn.disabled = false;
        } else {
          status.textContent = "‚ùå Selecione um arquivo com extens√£o .zip";
          status.classList.add("error");
          sendBtn.disabled = true;
        }
      }
    });

    async function enviar() {
      if (sendBtn.disabled) return;

      const file = fileInput.files[0];
      if (!file) {
        status.textContent = "‚ùå Nenhum arquivo selecionado.";
        status.classList.add("error");
        return;
      }

      status.textContent = "‚è≥ Enviando, aguarde...";
      status.classList.remove("error");

      const formData = new FormData();
      formData.append("zipfile", file);

      try {
        const res = await fetch("/upload", {
          method: "POST",
          body: formData,
        });

        const texto = await res.text();

        if (res.ok) {
          status.classList.remove("error");
          status.innerHTML = "‚úÖ Sucesso!<br>" + texto;
        } else {
          status.classList.add("error");
          status.textContent = "‚ùå Erro: " + texto;
        }
      } catch (err) {
        status.classList.add("error");
        status.textContent = "‚ùå Erro na conex√£o com o servidor.";
      }
    }
  </script>
</body>
</html>
